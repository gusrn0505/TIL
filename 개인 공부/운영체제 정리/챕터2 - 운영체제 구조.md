#### 운영체제 서비스의 역할

- 운영 체제는 아래의 목적을 달성함으로써, <u>프로그램 실행 환경을 제공한다.</u>
  - 사용자 인터페이스 :  운영체제와 상호 작용하기 위한 방식으로, 여러 형태가 존재한다. 
    
    - 1). 명령 인터프리터(CLI) : Input - 명령/ Output- 결과 
      
      2). 그래픽 사용자 인터페이스(GUI) : Input - 키보드, 마우스/ Output- 그래픽 화면
      
      3). 터치스크린 인터페이스 : Input - 터치/ Output- 그래픽 화면 
  
  - 프로그램 수행 : 프로그램을 메모리에 적재하여 실행 
  
  - 통신 : 특정 프로세스가 다른 프로세스와 정보 교환. 
  
  - 입출력 연산 : 프로그램이 요구하는 입출력에 대해 연산 제공
  
  - 파일 시스템 조작 : 파일을 생성, 수정, 삭제, 접근 허가/금지 통제
  
  - 오류 탐지 : 오류 탐지 및 디버깅 진행 
  
  - 자원 할당 : 다수의 프로세스나 다수의 작업이 동시에 실행될 때, 각각에 대해 자원을 할당함.
  
  - 기록작성 : 어떤 프로그램이 어떤 종류의 컴퓨터 자원을 많이 사용하는 지 추적 
  
  - 보호와 보안



#### 시스템 콜

- <u>역할 : 운영체제에서 제공하는 서비스에 대한 인터페이스를 제공한다.</u>

- 일반적으로 C와 C ++ 언어로 작성되어 있으며, 간단한 프로그램이라도 운영체제의 기능을 아주 많이 사용하며, 각 기능에 대해 시스템 콜을 호출해야 한다.
  
  - 이에 프로그래머는 효율적으로 시스템 콜 서비스에 액세스 하기 위해 **시스템 콜의 *API**(application programming interface)를 사용한다.
  
  - *API는 각 함수에 전달되어야 할 매개변수들과 반환 값을 포함하여, 사용 가능한 함수의 집합을 명시한다. 



- 유형 
  
  - (1) 프로세스 제어 : 끝내기/중지, 적재/수행, 프로그램 생성/종료, 등
    
    (2) 파일 관리 : 파일 생성/삭제, 열기/닫기, 읽기/쓰기/위치 변경 등
    
    (3) 장치 관리 : 장치 요구/방출, 읽기/쓰기/위치 변경, 등
    
    (4) 정보 유지 관리 : 시간/날짜의 설정과 획득
    
    (5) 통신
    
    (6) 보호
    
    표준 C 라이브러리는 UNIX 및 Linux 시스템을 위한 시스템 콜 인터페이스를 제공한다.



- **API 사용의 이점**
  1. 프로그램 호환성 : 동일한 API를 지원하는 시스템간에는 동일하게 컴파일되고 실행된다.
  
  2. 실행시간 환경(RTE) 운영에 필요 
     
     > RTE(Run time Environment) : 컴퓨터가 실행되는 동안 프로세스나 프로그램을 위한 소프트웨어 서비스를 제공하는 가상 머신의 상태. 프로그램을 실행시키기 위한 하나의 패키지
  
  3. 편리성 : 호출자는 시스템 콜이 어떻게 구현되고 실행 중 무슨 작업을 하는지 알 필요가 없음. 운영체제 인터페이스에 대한 내용은 API에 의해 숨겨지고, RTE로 의해 관리됨.  



#### 시스템 서비스

- 시스템 서비스는 시스템 콜에 대한 사용자 인터페이스로,  프로그램 개발과 실행을 위해 더 편리한 환경(프로그램)을 제공한다.

- 파일 관리 / 상태 정보 / 프로그래밍 언어 지원 / 프로그램 수행 등 기본적인 역할을 수행한다. 



#### 링커와 로더 - 프로그램 작동 방식

- 프로그램을 CPU에서 실행하기 위해선 메모리로 가져와 프로세스 형태로 배치되어야 한다.

- **프로그램 작동 방식** 
1. 소스 파일을 임의의 물리 메모리 위치에 적재하도록 설계된 오브젝트 파일로 컴파일함
   
   > 재배치 가능 오브젝트 형식으로 만들었다고도 함. 
   > 
   > 재배치 : 프로그램 부분에 최종 주소를 할당하고 프로그램 코드와 데이터를 해당 주소와 일치하도록 조정하는 것. 프로그램이 실행될 때 코드가 라이브러리 함수를 호출하고 변수에 접근 가능하게 만듬. 

2. 링커가 재배치 가능 오브젝트 파일들을 하나의 이진 실행 파일로 결합함

3. 로더가 이진 실행 파일을 메모리에 적재시킴으로써, CPU 코어에서 실행할 수 있는 상태로 만듬



##### 응용 프로그램이 운영체제마다 다른 이유

- 프로그램 실행 파일에 대한 서로 다른 이진 형식, CPU에 따라 다른 명령 집합 및 운영체제마다 다른 시스템 콜이 포함된다.

- 특정 응용 프로그램이 여러 운영체제에서 실행가능하도록 설정할 순 있다. 하지만 제한이 많다.  



#### 운영체제 설계 및 구현

- 운영체제는 특정 목적을 염두에 두고 설계되었다. 이러한 목적은 궁극적으로 운영체제 정책을 결정한다. 운영체제는 특정 기법을 통해 이러한 정책을 구현한다.
  
  > 기법 : 어떤 일을 "어떻게" 할 것인가를 결정하는 것 
  > 
  > 정책 : "무엇을" 할 것인가를 결정하는 것 

- 목적은 크게 사용자 / 시스템 목적 2가지로 나눠 볼수 있다. 



##### 운영체제 구조

1. 모놀리식 운영체제 : 구조가 없음
   
   - 커널의 모든 기능을 단일 주소 공간에서 실행되는 단일 정적 이진 파일에 넣음.
   
   - 장점 : 성능 좋음. 시스템 콜 인터페이스에서 오버헤드가 거의 없고, 커널 안 통신 속도 빠름
   
   - 단점 : 구현 및 확정하기 어려움



2. 계층적 접근 (모듈화의 일종) : 운영체제를 여러 개의 개별 층으로 나눔
   
   - 하위층은 하드웨어 인터페이스이고 최상위층은 사용자 인터페이스이다.
   
   - 장점 : 구현과 디버깅이 간담함
   
   - 단점 : 성능 악화. 운영체제 서비스를 얻기 위해 사용자 프로그램이 여러 계층을 통과해야함(오버헤드 발생)



3. 마이크로 커널
   
   - 중요치 않은 구성요소를 커널로부터 제거, 그들을 별도의 주소 공간에 존재하는 사용자 수준 프로그램으로 구현. 메시지 전달을 통해 통신.
   
   - 장점 : 운영체제 확장 용이
   
   - 단점 : 가중된 시스템 기능 오버헤드로 인해 성능 악화



4. 적재가능 커널 모듈
   
   - 주요 개념 : 커널은 핵심 서비스를 제공, 다른 서비스들은 커널이 실행되는 동안 동적으로 구현.
     
     

5. 하이브리드 방식
   
   - 현대의 많은 운영체제는 모놀리식 커널과 모듈의 조합을 사용하여 하이브리드 시스템으로 구성된다.


